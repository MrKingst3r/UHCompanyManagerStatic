import{_ as k,k as E,u as D,s as U,o as C,c as n,b as e,w as a,v as i,f,F as m,h,Q as N,R as V,a6 as I,a7 as A,a8 as R,a9 as S,a1 as M,a as l,a3 as q,t as u,K as L}from"./index.4180d3e0.js";import{u as z}from"./index.4c966179.js";import{r as b}from"./index.afdce5e1.js";const c=E(),B={setup(){const v=D(),o=N(),_=V(),s=U({event:{name:null,description:null,date:null,address:{line1:null,line2:null,city:null,county:null,zip:null},attendees:[],services:[]},clients:[],services:[],hoverId:null}),t=z({event:{name:{required:b},date:{required:b,validDate:d=>{const g=new Date(d);return!isNaN(g)}}}},s),r=async()=>{if(await t.value.$validate(),!t.$error)try{const d=await I(o.params.id,s.event);c.success(d),_.push("/findevents")}catch(d){c.error("Error updating event",d)}},x=async()=>{try{if(s.event.attendees.length>0){c.info("Event cannot be deleted since it has attendees.");return}const d=await A(o.params.id);c.success(d),_.push("/findevents")}catch(d){c.error(d)}};return C(async()=>{try{const[d,g,w]=await Promise.all([R(o.params.id),S(o.params.id),M()]);d.date=new Date(d.date).toISOString().substring(0,10),s.event=d,s.clients=g,s.services=w,t.value.$reset()}catch(d){console.log(d),c.error("Error loading data",d)}}),{state:s,v$:t,user:v,submitEventUpdate:r,submitDeleteEvent:x}}},j=e("div",null,[e("h1",{class:"font-bold text-4xl text-red-700 tracking-widest text-center mt-10"}," Event Details ")],-1),F={class:"px-10 py-20"},O={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},P=e("h2",{class:"text-2xl font-bold"},"Event Details",-1),T={class:"flex flex-col"},G={class:"block"},K=e("span",{class:"text-gray-700"},"Event Name",-1),Q=e("span",{style:{color:"#ff0000"}},"*",-1),Z={key:0,class:"text-red-500"},H={class:"flex flex-col"},J={class:"block"},W=e("span",{class:"text-gray-700"},"Date",-1),X=e("span",{style:{color:"#ff0000"}},"*",-1),Y={key:0,class:"text-red-500"},$={key:0},ee={key:1},se=e("div",null,null,-1),te=e("div",null,null,-1),oe={class:"flex flex-col"},de={class:"block"},ne=e("span",{class:"text-gray-700"},"Description",-1),le={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10 mt-10"},ae=e("h2",{class:"text-2xl font-bold"},"Services Offered at Event",-1),ie={class:"flex flex-col grid-cols-3"},re={key:0,class:"space-y-2"},ce=["data-service-id"],ue={class:"block w-full h-full"},ve=["id","value","checked","disabled"],_e={class:"font-medium"},ge={key:1,class:"text-gray-600"},fe={class:"mt-10 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},me=e("h2",{class:"text-2xl font-bold"},"Address",-1),he={class:"flex flex-col"},be={class:"block"},pe=e("span",{class:"text-gray-700"},"Address Line 1",-1),ye={class:"flex flex-col"},xe={class:"block"},we=e("span",{class:"text-gray-700"},"Address Line 2",-1),ke={class:"flex flex-col"},Ee={class:"block"},De=e("span",{class:"text-gray-700"},"City",-1),Ue=e("div",null,null,-1),Ce={class:"flex flex-col"},Ne={class:"block"},Ve=e("span",{class:"text-gray-700"},"County",-1),Ie={class:"flex flex-col"},Ae={class:"block"},Re=e("span",{class:"text-gray-700"},"Zip Code",-1),Se={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Me=e("div",null,null,-1),qe={class:"flex justify-between mt-10 mr-20"},Le=["disabled"],ze={class:"flex justify-between mt-10 mr-20"},Be=["disabled"],je={class:"flex justify-between mt-10 mr-20"},Fe=e("hr",{class:"mt-10 mb-10"},null,-1),Oe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Pe=e("div",null,[e("h2",{class:"text-2xl font-bold"},"List of Attendees"),e("h3",{class:"italic"},"Click table row to view client details")],-1),Te={class:"flex flex-col col-span-2"},Ge={class:"min-w-full shadow-md rounded"},Ke=e("thead",{class:"bg-gray-50 text-xl"},[e("tr",null,[e("th",{class:"p-4 text-left"},"Name"),e("th",{class:"p-4 text-left"},"City"),e("th",{class:"p-4 text-left"},"Phone Number")])],-1),Qe={class:"divide-y divide-gray-300"},Ze=["onClick","onMouseenter"],He={class:"p-2 text-left"},Je={class:"p-2 text-left"},We={class:"p-2 text-left"};function Xe(v,o,_,s,p,y){return l(),n("main",null,[j,e("div",F,[e("div",O,[P,e("div",T,[e("label",G,[K,Q,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":o[0]||(o[0]=t=>s.state.event.name=t)},null,512),[[i,s.state.event.name]]),s.v$.event.name.$error?(l(),n("span",Z," Event Name is required ")):f("",!0)])]),e("div",H,[e("label",J,[W,X,a(e("input",{type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":o[1]||(o[1]=t=>s.state.event.date=t)},null,512),[[i,s.state.event.date]]),s.v$.event.date.$error?(l(),n("span",Y,[s.v$.event.date.required.$invalid?(l(),n("span",$," Event Date is required ")):!s.v$.event.date.required.$invalid&&s.v$.event.date.validDate.$invalid?(l(),n("span",ee," Event Date must be a valid date ")):f("",!0)])):f("",!0)])]),se,te,e("div",oe,[e("label",de,[ne,a(e("textarea",{class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",rows:"2","onUpdate:modelValue":o[2]||(o[2]=t=>s.state.event.description=t)},null,512),[[i,s.state.event.description]])])])]),e("div",le,[ae,e("div",ie,[e("div",null,[s.state.services.length?(l(),n("ul",re,[(l(!0),n(m,null,h(s.state.services,t=>(l(),n("li",{key:t._id,"data-service-id":t._id,class:"rounded-lg border border-gray-300 p-2 hover:bg-gray-100 transition-colors relative"},[e("label",ue,[a(e("input",{type:"checkbox",id:t._id,value:t._id,checked:s.state.event.services.includes(t._id),"onUpdate:modelValue":o[3]||(o[3]=r=>s.state.event.services=r),disabled:t.status==="Inactive",class:"rounded border-gray-300 disabled:opacity-50 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50 mr-2"},null,8,ve),[[q,s.state.event.services]]),e("span",_e,u(t.name),1)])],8,ce))),128))])):(l(),n("p",ge,"No Active Services Available"))])])]),e("div",fe,[me,e("div",he,[e("label",be,[pe,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":o[4]||(o[4]=t=>s.state.event.address.line1=t)},null,512),[[i,s.state.event.address.line1]])])]),e("div",ye,[e("label",xe,[we,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":o[5]||(o[5]=t=>s.state.event.address.line2=t)},null,512),[[i,s.state.event.address.line2]])])]),e("div",ke,[e("label",Ee,[De,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":o[6]||(o[6]=t=>s.state.event.address.city=t)},null,512),[[i,s.state.event.address.city]])])]),Ue,e("div",Ce,[e("label",Ne,[Ve,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":o[7]||(o[7]=t=>s.state.event.address.county=t)},null,512),[[i,s.state.event.address.county]])])]),e("div",Ie,[e("label",Ae,[Re,a(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",placeholder:"","onUpdate:modelValue":o[8]||(o[8]=t=>s.state.event.address.zip=t)},null,512),[[i,s.state.event.address.zip]])])])]),e("div",Se,[Me,e("div",qe,[e("button",{onClick:o[9]||(o[9]=(...t)=>s.submitEventUpdate&&s.submitEventUpdate(...t)),type:"submit",class:"bg-green-700 disabled:opacity-50 text-white rounded",disabled:s.user.role==="viewer"}," Update Event ",8,Le)]),e("div",ze,[e("button",{onClick:o[10]||(o[10]=(...t)=>s.submitDeleteEvent&&s.submitDeleteEvent(...t)),type:"submit",class:"bg-red-700 disabled:opacity-50 text-white rounded",disabled:s.user.role==="viewer"}," Delete Event ",8,Be)]),e("div",je,[e("button",{type:"reset",class:"border border-red-700 bg-white text-red-700 rounded",onClick:o[11]||(o[11]=t=>this.$router.back())}," Go back ")])]),Fe,e("div",Oe,[Pe,e("div",Te,[e("table",Ge,[Ke,e("tbody",Qe,[(l(!0),n(m,null,h(s.state.clients,t=>(l(),n("tr",{onClick:r=>v.$router.push({name:"clientdetails",params:{id:t._id}}),key:t._id,class:L(["cursor-pointer",{hoverRow:s.state.hoverId===t._id}]),onMouseenter:r=>s.state.hoverId=t._id,onMouseleave:o[12]||(o[12]=r=>s.state.hoverId=null)},[e("td",He,u(t.firstName+" "+t.lastName),1),e("td",Je,u(t.address.city),1),e("td",We,u(t.phoneNumber.primary),1)],42,Ze))),128))])])])])])])}const ts=k(B,[["render",Xe]]);export{ts as default};
