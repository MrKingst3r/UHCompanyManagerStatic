import{_ as k,u as D,r as _,k as U,o as C,ad as I,ae as M,c as d,b as e,w as c,v as h,f as R,aa as p,F as V,h as E,Q as B,R as N,af as T,ag as j,a as u,K as A,t as m}from"./index.4180d3e0.js";import{u as F}from"./index.4c966179.js";const L={setup(){const r=B(),o=N(),f=D(),t=_({name:null,description:null,status:null}),l=_([]),g=_(null),s=U(),n=i=>{const a=new Date(i),y=a.getUTCFullYear(),w=String(a.getUTCMonth()+1).padStart(2,"0"),S=String(a.getUTCDate()).padStart(2,"0");return`${w}/${S}/${y}`},v=F(),b=async()=>{if(await v.value.$validate(),!v.$error)try{const i=await T(r.params.id,t.value);o.push("/findservice"),s.success(i)}catch(i){s.error("error updating service",i)}},x=async()=>{try{if(l.value.length!==0){s.info("Service cannot be deleted since it is being used by events.");return}const i=await j(r.params.id);s.success(i),o.push("/findservice")}catch(i){s.error(i)}};return C(async()=>{try{const[i,a]=await Promise.all([I(r.params.id),M(r.params.id)]);t.value=i,l.value=a}catch(i){s.error(i)}}),{v$:v,user:f,service:t,events:l,hoverId:g,formatDate:n,submitServiceUpdate:b,submitDeleteService:x}}},q=e("h1",{class:"font-bold text-4xl text-red-700 tracking-widest text-center mt-10"}," Service Details ",-1),z={class:"px-10 py-20"},G={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},K=e("h2",{class:"text-2xl font-bold"},"Service Details",-1),P={class:"flex flex-col"},Q={class:"block"},Y=e("span",{class:"text-gray-700"},"Service Name",-1),H=e("span",{style:{color:"#ff0000"}},"*",-1),J={key:0,class:"text-red-500"},O={class:"flex flex-col"},W=e("span",{class:"text-gray-700"},"Description:",-1),X={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},Z=e("div",null,null,-1),$={class:"flex flex-col"},ee={class:"block"},se=e("span",{class:"text-gray-700"},"Service Status",-1),te=e("span",{style:{color:"#ff0000"}},"*",-1),oe={class:"mt-1"},ie={class:"inline-flex items-center"},re=e("span",{class:"ml-2"},"Active",-1),ae={class:"inline-flex items-center ml-6"},le=e("span",{class:"ml-2"},"Inactive",-1),ne={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},de=e("div",null,null,-1),ce={class:"flex justify-between mt-10 mr-20"},ue={class:"flex justify-between mt-10 mr-25"},ve=["disabled"],_e={class:"flex justify-between mt-20 mr-20"},me=["disabled"],fe={class:"flex justify-between mt-20 mr-20"},ge=e("hr",{class:"mt-10 mb-10"},null,-1),he={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10"},pe=e("div",{class:"ml-10"},[e("h2",{class:"text-2xl font-bold"},"List of Events"),e("h3",{class:"italic"},"Click table row to view event details")],-1),be={class:"flex flex-col col-span-2"},xe={class:"min-w-full shadow-md rounded"},ye=e("thead",{class:"bg-gray-50 text-xl"},[e("tr",null,[e("th",{class:"p-4 text-left"},"Event Name"),e("th",{class:"p-4 text-left"},"Event Date"),e("th",{class:"p-4 text-left"},"Event Address")])],-1),we={class:"divide-y divide-gray-300"},Se=["onClick","onMouseenter"],ke={class:"p-2 text-left"},De={class:"p-2 text-left"},Ue={class:"p-2 text-left"};function Ce(r,o,f,t,l,g){return u(),d("main",null,[q,e("div",z,[e("div",G,[K,e("div",P,[e("label",Q,[Y,H,c(e("input",{type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":o[0]||(o[0]=s=>t.service.name=s)},null,512),[[h,t.service.name]])]),t.service.value&&t.v$.service.name.$error?(u(),d("span",J," Service Name is required ")):R("",!0)]),e("div",O,[e("label",null,[W,c(e("textarea",{class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50","onUpdate:modelValue":o[1]||(o[1]=s=>t.service.description=s)},null,512),[[h,t.service.description]])])])]),e("div",X,[Z,e("div",$,[e("label",ee,[se,te,e("div",oe,[e("label",ie,[c(e("input",{type:"radio",class:"form-radio",value:"Active","onUpdate:modelValue":o[2]||(o[2]=s=>t.service.status=s)},null,512),[[p,t.service.status]]),re]),e("label",ae,[c(e("input",{type:"radio",class:"form-radio",value:"Inactive","onUpdate:modelValue":o[3]||(o[3]=s=>t.service.status=s)},null,512),[[p,t.service.status]]),le])])])])]),e("div",ne,[de,e("div",ce,[e("div",ue,[e("button",{onClick:o[4]||(o[4]=(...s)=>t.submitServiceUpdate&&t.submitServiceUpdate(...s)),type:"submit",class:"bg-green-700 disabled:opacity-50 text-white rounded",disabled:t.user.role==="viewer"}," Update Service ",8,ve)])]),e("div",_e,[e("button",{onClick:o[5]||(o[5]=(...s)=>t.submitDeleteService&&t.submitDeleteService(...s)),type:"submit",class:"bg-red-700 disabled:opacity-50 text-white rounded",disabled:t.user.role==="viewer"}," Delete Service ",8,me)]),e("div",fe,[e("button",{type:"reset",class:"border border-red-700 bg-white text-red-700 rounded",onClick:o[6]||(o[6]=s=>r.$router.back())}," Go back ")])])]),ge,e("div",he,[pe,e("div",be,[e("table",xe,[ye,e("tbody",we,[(u(!0),d(V,null,E(t.events,s=>(u(),d("tr",{onClick:n=>r.$router.push({name:"eventdetails",params:{id:s._id}}),key:s._id,class:A(["cursor-pointer",{hoverRow:t.hoverId===s._id}]),onMouseenter:n=>t.hoverId=s._id,onMouseleave:o[7]||(o[7]=n=>t.hoverId=null)},[e("td",ke,m(s.name),1),e("td",De,m(t.formatDate(s.date)),1),e("td",Ue,m(s.address.line1),1)],42,Se))),128))])])])])])}const Re=k(L,[["render",Ce]]);export{Re as default};
